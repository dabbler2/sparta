<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Martian+Mono&display=swap');
		*{
			font-family: 'Martian Mono', monospace;
		}
		.main{
			background-color: green;
			color: white;
			background-image: url('https://wallpapershome.com/images/pages/pic_h/22156.jpg');
			background-position: center;
			background-size: cover;
		}
		body{
			background-color: black;
		}
		.mycards{
			width: 1200px;
			margin: 20px auto 20px;
		}
		.mypostingbox{
			width: 500px;
			margin: 20px auto 0;
			border: 1px solid white;
			padding: 20px;
			border-radius: 5px;
		}
		.form-control{
			background-color: transparent;
			color: white;
		}
		.form-floating > label{
			color: white;
		}
		.input-group > label{
			background-color: transparent;
			color: white;
		}
		.mypostingbox > button{
			width: 100%;
		}
	</style>
	<script type="module">
		// Firebase SDK 라이브러리 가져오기
		import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
		import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
		import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
		import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

		// Firebase 구성 정보 설정
		const firebaseConfig = {
		  apiKey: "AIzaSyCasnJbLcTQVDDboaqlirKdf_bC03c8mIY",
		  authDomain: "week4-55464.firebaseapp.com",
		  projectId: "week4-55464",
		  storageBucket: "week4-55464.appspot.com",
		  messagingSenderId: "1064396955103",
		  appId: "1:1064396955103:web:fdced6a98fa13b03d4786a",
		  measurementId: "G-F0RLBJ11XC"
		};

		// Firebase 인스턴스 초기화
		const app = initializeApp(firebaseConfig);
		const db = getFirestore(app);
		
		$("#postingbtn").click(async function () {
			let doc = {'url':$('#url').val(), 'title':$('#title').val(), 'comment':$('#comment').val(), 'rating':$('#rating option:selected').text()};
			await addDoc(collection(db, "movies"), doc);
			alert('Posting success');
			window.location.reload();
		})
		
		$("#infobtn").click(async () => {
			$('#postingbox').toggle();
		})
		
		let url = 'http://spartacodingclub.shop/sparta_api/weather/seoul';
		fetch(url).then(res => res.json()).then(data => {
			$('#temp').text(data['temp']);
		});

		let docs = await getDocs(collection(db, "movies"));
		docs.forEach((doc) => {
			let row = doc.data();
			$('#cards').append(`
			  <div class="col">
				<div class="card h-100">
				  <img src="${row['url']}" class="card-img-top" alt="...">
				  <div class="card-body">
					<h5 class="card-title">${row['title']}</h5>
					<p>${row['rating']}</p>
					<p class="card-text">${row['comment']}</p>
				  </div>
				</div>
			  </div>`
			);
		}); 
	</script>
</head>
<body>
	<header class="p-3 text-bg-dark">
		<div class="container" bis_skin_checked="1">
		  <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start" bis_skin_checked="1">
			<a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
			  <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
			</a>

			<ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
			  <li><a href="#" class="nav-link px-2 text-danger">Popcorn</a></li>
			  <li><a href="#" class="nav-link px-2 text-white">Home</a></li>
			  <li><a href="#" class="nav-link px-2 text-white">Movie</a></li>
			  <li><a href="#" class="nav-link px-2 text-white">Drama</a></li>
			  <li><a href="#" class="nav-link px-2 text-white">Watchlist</a></li>
			  <li><a href="#" class="nav-link px-2 text-white">Seoul <span id="temp"></span>°C</a></li>
			</ul>

			<form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
			  <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
			</form>

			<div class="text-end" bis_skin_checked="1">
			  <button type="button" class="btn btn-outline-light me-2">Login</button>
			  <button type="button" class="btn btn-danger">Sign-up</button>
			</div>
		  </div>
		</div>
	</header>
	<div class="main">
		<div class="p-5 mb-4 bg-body-tertiary rounded-3" bis_skin_checked="1">
		  <div class="container-fluid py-5" bis_skin_checked="1">
			<h1 id="title0" class="display-5 fw-bold">Joker</h1>
			<p class="col-md-8 fs-4">During the 1980's, a failed stand-up comedian is driven insane and turns to a life of crime and chaos in Gotham City while becoming an infamous psychopathic crime figure.</p>
			<button type="button" class="btn btn-outline-light">Play</button>
			<button id="infobtn" type="button" class="btn btn-outline-light">More info</button>
		  </div>
		</div>
	</div>
	<div id="postingbox" class="mypostingbox">
		<div class="form-floating mb-3">
		  <input type="email" class="form-control" id="url" placeholder="Moive poster URL">
		  <label for="url">Movie poster URL</label>
		</div>
		<div class="form-floating mb-3">
		  <input type="email" class="form-control" id="title" placeholder="Moive title">
		  <label for="title">Movie title</label>
		</div>
		<div class="input-group mb-3">
		  <label class="input-group-text" for="inputGroupSelect01">Rating</label>
		  <select class="form-select" id="rating">
			<option selected>Choose...</option>
			<option value="1">⭐</option>
			<option value="2">⭐⭐</option>
			<option value="3">⭐⭐⭐</option>
			<option value="4">⭐⭐⭐⭐</option>
			<option value="5">⭐⭐⭐⭐⭐</option>
		  </select>
		</div>
		<div class="form-floating mb-3">
		  <input type="email" class="form-control" id="comment" placeholder="Comment">
		  <label for="comment">Comment</label>
		</div>
		<button id="postingbtn" type="button" class="btn btn-danger">Upload</button>
	</div>
	<div class="mycards">
		<div id="cards" class="row row-cols-1 row-cols-md-4 g-4">
		  <!--<div class="col">
			<div class="card h-100">
			  <img src="https://m.media-amazon.com/images/M/MV5BODUyODM1OGEtNTY3ZC00OTFjLTkyNDgtODU4MTk5NzkzYmQ5XkEyXkFqcGdeQXVyNjczMjc4NTA@._V1_.jpg" class="card-img-top" alt="...">
			  <div class="card-body">
				<h5 class="card-title">Title</h5>
				<p>⭐⭐⭐</p>
				<p class="card-text">Comment</p>
			  </div>
			</div>
		  </div>
		  <div class="col">
			<div class="card h-100">
			  <img src="https://m.media-amazon.com/images/M/MV5BODUyODM1OGEtNTY3ZC00OTFjLTkyNDgtODU4MTk5NzkzYmQ5XkEyXkFqcGdeQXVyNjczMjc4NTA@._V1_.jpg" class="card-img-top" alt="...">
			  <div class="card-body">
				<h5 class="card-title">Title</h5>
				<p>⭐⭐⭐</p>
				<p class="card-text">Comment</p>
			  </div>
			</div>
		  </div>
		  <div class="col">
			<div class="card h-100">
			  <img src="https://m.media-amazon.com/images/M/MV5BODUyODM1OGEtNTY3ZC00OTFjLTkyNDgtODU4MTk5NzkzYmQ5XkEyXkFqcGdeQXVyNjczMjc4NTA@._V1_.jpg" class="card-img-top" alt="...">
			  <div class="card-body">
				<h5 class="card-title">Title</h5>
				<p>⭐⭐⭐</p>
				<p class="card-text">Comment</p>
			  </div>
			</div>
		  </div>
		  <div class="col">
			<div class="card h-100">
			  <img src="https://m.media-amazon.com/images/M/MV5BODUyODM1OGEtNTY3ZC00OTFjLTkyNDgtODU4MTk5NzkzYmQ5XkEyXkFqcGdeQXVyNjczMjc4NTA@._V1_.jpg" class="card-img-top" alt="...">
			  <div class="card-body">
				<h5 class="card-title">Title</h5>
				<p>⭐⭐⭐</p>
				<p class="card-text">Comment</p>
			  </div>
			</div>
		  </div>-->
		</div>
	</div>
</body>
</html>